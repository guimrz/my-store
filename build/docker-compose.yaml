version: '3.5'

services:
  consul-server:
    image: hashicorp/consul:latest
    container_name: consul-server
    networks:
      - bridge
    ports:
      - "8500:8500"
      - "8600:8600/tcp"
      - "8600:8600/udp"
    # command: "agent"

  gateway:
    image: gateway:latest
    container_name: gateway
    build: 
      context: ../src/
      dockerfile: Gateway/MyStore.Gateway/Dockerfile
    networks: 
      - corp
    environment: 
      - ASPNETCORE_ENVIRONMENT=Development
    expose: 
      - '80'
    ports: 
      - "60000:80"

networks:
  corp:
    driver: "bridge"